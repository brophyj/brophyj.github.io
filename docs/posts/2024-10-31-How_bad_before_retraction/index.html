<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jay Brophy">
<meta name="description" content="How bad must it be before retraction?">
<title>jay’s website - Reflections on peer review - part 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="jay’s website - Reflections on peer review - part 2">
<meta property="og:description" content="How bad must it be before retraction?">
<meta property="og:image" content="https://brophyj.com/posts/2024-10-31-How_bad_before_retraction/preview-image.jpg">
<meta property="og:site_name" content="jay's website">
<meta name="twitter:title" content="jay’s website - Reflections on peer review - part 2">
<meta name="twitter:description" content="How bad must it be before retraction?">
<meta name="twitter:image" content="https://brophyj.com/posts/2024-10-31-How_bad_before_retraction/preview-image.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">jay’s website</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../example.html"> 
<span class="menu-text">Art</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="https://orcid.org/my-orcid?orcid=0000-0001-8049-6875"> 
<span class="menu-text"><i class="fab fa-orcid"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mastodon.social/@brophyj"> 
<span class="menu-text"><i class="fab fa-mastodon"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://twitter.com/brophyj"> 
<span class="menu-text"><i class="fab fa-twitter"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/brophyj/"> 
<span class="menu-text"><i class="fab fa-linkedin-in"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/brophyj"> 
<span class="menu-text"><i class="fab fa-github"></i></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page">
      <h1 class="title">Reflections on peer review - part 2</h1>
                  <div>
        <div class="description">
          How bad must it be before retraction?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Peer review</div>
                <div class="quarto-category">Transparency</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author column-page">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://brophyj.github.io/">Jay Brophy</a> <a href="https://orcid.org/0000-0001-8049-6875" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://mcgill.ca">
              McGill University Dept Medince, Epidemiology &amp; Biostatistics
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta column-page">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Thursday, the 31st of October, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block column-page" id="quarto-document-content"><section id="background" class="level2"><h2 class="anchored" data-anchor-id="background">Background</h2>
<p>One of the news feeds I subscribe to (<strong>ACC CV news</strong>) reported the headline <span style="color: red">“Ketogenic Diet Could Reduce The Risk For All-Cause Mortality By Up To 24%”</span> with a reference to an article published in <a href="https://www.nature.com/articles/s41598-024-73384-x">Nature Scientific Reports</a><span class="citation" data-cites="RN12246">(<a href="#ref-RN12246" role="doc-biblioref">Qu, Huang, and Rong 2024</a>)</span>. Moreover it was reported that the results “suggest the keto diet did not increase the risk for cardiovascular disease-related death despite its content possibly contributing to a higher risk for cardiovascular diseases.” Sounds too good to be true so I had a look.</p>
</section><section id="the-journal" class="level2"><h2 class="anchored" data-anchor-id="the-journal">The journal</h2>
<p>I had previously heard of the journal, principally through its Nature branding but was quite unaware of much else, including its overall quality. Their <a href="https://www.nature.com/srep/about">website</a> claims <span style="color: red">“Scientific Reports is the 5th most-cited journal in the world, with more than 734,000 citations in 2023”</span>. Impressive! I also found their impact factor (IF) was 3.8. Now we are all aware of the quality limitations of IF but these numbers do raise some questions. <span class="math display">\[Impact\,Factor = \frac{
  Number\,of\,Citations\,in\,2023\,to\,articles\,from\,2021\,and\,2022}{
    Number\,of\,Articles\,published\,in\,2021\,and\,2022}\]</span> Thus while the number of reported citations does seem impressive, the IF suggests either many of these citations refer to reports prior to 2021, these citations wouldn’t count in the IF, or that the journal publishes an extraordinary high number of articles each year that dilutes the IF.</p>
</section><section id="the-authors" class="level2"><h2 class="anchored" data-anchor-id="the-authors">The authors</h2>
<p>Authors and Affiliations</p>
<p>Xiaolong Qu Department of Cardiovascular Medicine, Renji Hospital, Shanghai Jiaotong University School of Medicine, 160 Pujian Road, Pudong New Area, Shanghai, 200120, China</p>
<p>Lei Huang &amp; Jiacheng Rong</p>
<p>Department of Cardiology, Renji Hospital Ningbo Branch, Shanghai Jiao Tong University School of Medicine, 1155 Binhai 2nd Road, Hangzhou Bay New District, Ningbo, 315336, China</p>
<p>According to <a href="https://scholar.google.co.uk/scholar?hl=en&amp;as_sdt=0%2C5&amp;inst=8527805794314243738&amp;q=author%3A%22Lei+Huang%22+AND+author%3A%22Jiacheng+Rong%22+&amp;btnG=">Google Scholar</a> they have previously published 8 articles together.</p>
</section><section id="the-data" class="level2"><h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>This study used 43,776 adults from the National Health and Nutrition Examination Survey <a href="https://www.cdc.gov/nchs/nhanes/index.htm">(NHANES)</a> conducted between 2001 and 2018 to investigate the potential association between dietary ketogenic ratio (DKR) and both all-cause mortality and cardiovascular disease (CVD) mortality.</p>
</section><section id="their-results" class="level2"><h2 class="anchored" data-anchor-id="their-results">Their results</h2>
<p>Using an adjusted Cox proportional hazards regression analysis the authors report a significant inverse association was observed between the dietary ketogenic ratio (DKR) and all-cause mortality (HR = 0.76, 95% CI = 0.63–0.9, P = 0.003). However, no significant association with cardiovascular mortality was found (HR = 1.13; CI = 0.79–1.6; P = 0.504).</p>
</section><section id="their-conclusions" class="level2"><h2 class="anchored" data-anchor-id="their-conclusions">Their conclusions</h2>
<p>“In the adult population of the United States, adherence to a KD exhibits potential in reducing all-cause mortality risk while not posing an increased threat of CVD-related fatalities.”</p>
</section><section id="my-issues-in-no-particular-order" class="level2"><h2 class="anchored" data-anchor-id="my-issues-in-no-particular-order">My issues (in no particular order)</h2>
<ol type="1">
<li><p>Measurement error: The exposure variable DKR is never measured. The authors report DKR is calculated based on an equation proposed in a 1980 publication entitled “The ketogenic diet: mechanism of anticonvulsant action”<span class="citation" data-cites="RN12245">(<a href="#ref-RN12245" role="doc-biblioref">Withrow 1980</a>)</span>. The exact equation and the population is was derived from and relationship to the study population is unknown. This is in addition to the usual measurement errors associated with dietary 24 hour recall studies.</p></li>
<li><p>Selection bias: The study population of eligible adults was 50,201 and 43,776 were analysed. It is unknown if this missing 13% resulted in selection bias but the possibility certainly exists.</p></li>
<li><p>Inferential errors: i) The authors report “no significant association with cardiovascular mortality was found (HR = 1.13; CI = 0.79–1.6; P = 0.504).” Classic error of “absence of evidence is not evidence of absence”[<span class="citation" data-cites="RN4395">Altman and Bland (<a href="#ref-RN4395" role="doc-biblioref">1995</a>)</span>]<span class="citation" data-cites="RN4841">(<a href="#ref-RN4841" role="doc-biblioref">Gelman and Stern 2006</a>)</span>. The data is compatible upon repeated sampling with a potential 60% increase in cardiovascular mortality. ii) Questionable causal inferences “Additional investigations are warranted to comprehensively comprehend the mechanisms underlying these observed associations and ascertain the feasibility and long-term sustainability of implementing a ketogenic diet for population-wide health benefits.”</p></li>
<li><p>Poor reporting: i) The actual DKR values are not provided. Instead we are only given quartile distributions among the deceased and survivors.ii) no discussion of the impact of researcher degrees of freedom in the choice of the 2 adjusted models iii) no discussion of model mis-specification iv) no verification of the Cox model assumptions.</p></li>
<li><p>Questionable data analysis: Here is a summary of the key elements of the baseline data according to survival status.</p></li>
</ol>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com">gt</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the data frame</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Characteristic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Gender"</span>, <span class="st">"Gender"</span>, <span class="st">"Age, y"</span>, <span class="st">"Age, y"</span>, <span class="st">"Age, y"</span>, <span class="st">"DKR"</span>, <span class="st">"DKR"</span>, <span class="st">"DKR"</span>, <span class="st">"DKR"</span><span class="op">)</span>,</span>
<span>  Category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"&lt; 40"</span>, <span class="st">"40–60"</span>, <span class="st">"≥ 60"</span>, <span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span><span class="op">)</span>,</span>
<span>  Deceased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"3,388 (56.0%)"</span>, <span class="st">"2,666 (44.0%)"</span>, <span class="st">"251 (4.1%)"</span>, <span class="st">"947 (15.6%)"</span>, <span class="st">"4,856 (80.2%)"</span>, </span>
<span>               <span class="st">"1,563 (25.8%)"</span>, <span class="st">"1,540 (25.4%)"</span>, <span class="st">"1,498 (24.7%)"</span>, <span class="st">"1,453 (24.0%)"</span><span class="op">)</span>,</span>
<span>  Survival <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"17,758 (47.1%)"</span>, <span class="st">"19,964 (52.9%)"</span>, <span class="st">"14,908 (39.5%)"</span>, <span class="st">"13,121 (34.8%)"</span>, </span>
<span>               <span class="st">"9,693 (25.7%)"</span>, <span class="st">"9,374 (24.9%)"</span>, <span class="st">"9,414 (25.0%)"</span>, <span class="st">"9,443 (25.0%)"</span>, <span class="st">"9,491 (25.2%)"</span><span class="op">)</span>,</span>
<span>  p_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"&lt; 0.001"</span>, <span class="st">""</span>, <span class="st">"&lt; 0.001"</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">"0.045"</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the gt table</span></span>
<span><span class="va">gt_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Study Characteristics and Outcomes"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    Characteristic <span class="op">=</span> <span class="st">"Characteristic"</span>,</span>
<span>    Category <span class="op">=</span> <span class="st">"Category"</span>,</span>
<span>    Deceased <span class="op">=</span> <span class="st">"Deceased (N = 6,054)"</span>,</span>
<span>    Survival <span class="op">=</span> <span class="st">"Survival (N = 37,722)"</span>,</span>
<span>    p_value <span class="op">=</span> <span class="st">"p-value"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_markdown.html">fmt_markdown</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Deceased</span>, <span class="va">Survival</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html">tab_options</a></span><span class="op">(</span></span>
<span>    column_labels.border.bottom.width <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html">px</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>    column_labels.border.bottom.style <span class="op">=</span> <span class="st">"solid"</span>,</span>
<span>    column_labels.border.bottom.color <span class="op">=</span> <span class="st">"#D3D3D3"</span>,</span>
<span>    table.width <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/pct.html">pct</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    data_row.padding <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html">px</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_style.html">tab_style</a></span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://gt.rstudio.com/reference/cell_fill.html">cell_fill</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray95"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://gt.rstudio.com/reference/cell_borders.html">cell_borders</a></span><span class="op">(</span>sides <span class="op">=</span> <span class="st">"bottom"</span>, color <span class="op">=</span> <span class="st">"gray90"</span>, style <span class="op">=</span> <span class="st">"solid"</span>, weight <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html">px</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_body.html">cells_body</a></span><span class="op">(</span></span>
<span>      columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      rows <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_style.html">tab_style</a></span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cell_text.html">cell_text</a></span><span class="op">(</span>align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span>,</span>
<span>    locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_body.html">cells_body</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Characteristic</span>, <span class="va">Category</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_style.html">tab_style</a></span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cell_text.html">cell_text</a></span><span class="op">(</span>align <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>,</span>
<span>    locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_body.html">cells_body</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Deceased</span>, <span class="va">Survival</span>, <span class="va">p_value</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">gt_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<div id="dmiisjqxlu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dmiisjqxlu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dmiisjqxlu thead, #dmiisjqxlu tbody, #dmiisjqxlu tfoot, #dmiisjqxlu tr, #dmiisjqxlu td, #dmiisjqxlu th {
  border-style: none;
}

#dmiisjqxlu p {
  margin: 0;
  padding: 0;
}

#dmiisjqxlu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dmiisjqxlu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dmiisjqxlu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dmiisjqxlu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dmiisjqxlu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dmiisjqxlu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dmiisjqxlu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dmiisjqxlu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dmiisjqxlu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dmiisjqxlu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dmiisjqxlu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dmiisjqxlu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dmiisjqxlu .gt_spanner_row {
  border-bottom-style: hidden;
}

#dmiisjqxlu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dmiisjqxlu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dmiisjqxlu .gt_from_md > :first-child {
  margin-top: 0;
}

#dmiisjqxlu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dmiisjqxlu .gt_row {
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dmiisjqxlu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dmiisjqxlu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dmiisjqxlu .gt_row_group_first td {
  border-top-width: 2px;
}

#dmiisjqxlu .gt_row_group_first th {
  border-top-width: 2px;
}

#dmiisjqxlu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmiisjqxlu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dmiisjqxlu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dmiisjqxlu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dmiisjqxlu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmiisjqxlu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dmiisjqxlu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dmiisjqxlu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dmiisjqxlu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dmiisjqxlu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dmiisjqxlu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmiisjqxlu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dmiisjqxlu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmiisjqxlu .gt_left {
  text-align: left;
}

#dmiisjqxlu .gt_center {
  text-align: center;
}

#dmiisjqxlu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dmiisjqxlu .gt_font_normal {
  font-weight: normal;
}

#dmiisjqxlu .gt_font_bold {
  font-weight: bold;
}

#dmiisjqxlu .gt_font_italic {
  font-style: italic;
}

#dmiisjqxlu .gt_super {
  font-size: 65%;
}

#dmiisjqxlu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dmiisjqxlu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dmiisjqxlu .gt_indent_1 {
  text-indent: 5px;
}

#dmiisjqxlu .gt_indent_2 {
  text-indent: 10px;
}

#dmiisjqxlu .gt_indent_3 {
  text-indent: 15px;
}

#dmiisjqxlu .gt_indent_4 {
  text-indent: 20px;
}

#dmiisjqxlu .gt_indent_5 {
  text-indent: 25px;
}

#dmiisjqxlu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dmiisjqxlu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="text-align: left;">Study Characteristics and Outcomes</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Characteristic" class="gt_col_heading gt_columns_bottom_border gt_left" style="text-align: left;" data-quarto-table-cell-role="th" scope="col">Characteristic</th>
<th id="Category" class="gt_col_heading gt_columns_bottom_border gt_left" style="text-align: left;" data-quarto-table-cell-role="th" scope="col">Category</th>
<th id="Deceased (N = 6,054)" class="gt_col_heading gt_columns_bottom_border gt_right" style="text-align: center;" data-quarto-table-cell-role="th" scope="col">Deceased (N = 6,054)</th>
<th id="Survival (N = 37,722)" class="gt_col_heading gt_columns_bottom_border gt_right" style="text-align: center;" data-quarto-table-cell-role="th" scope="col">Survival (N = 37,722)</th>
<th id="p-value" class="gt_col_heading gt_columns_bottom_border gt_left" style="text-align: center;" data-quarto-table-cell-role="th" scope="col">p-value</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Gender</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Male</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>3,388 (56.0%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>17,758 (47.1%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Gender</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Female</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>2,666 (44.0%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>19,964 (52.9%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Age, y</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">&lt; 40</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>251 (4.1%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>14,908 (39.5%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Age, y</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">40–60</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>947 (15.6%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>13,121 (34.8%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Age, y</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">≥ 60</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>4,856 (80.2%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>9,693 (25.7%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">DKR</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Q1</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>1,563 (25.8%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>9,374 (24.9%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">0.045</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">DKR</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Q2</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>1,540 (25.4%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>9,414 (25.0%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">DKR</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Q3</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>1,498 (24.7%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>9,443 (25.0%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Characteristic" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">DKR</td>
<td class="gt_row gt_left" headers="Category" style="text-align: left; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;">Q4</td>
<td class="gt_row gt_right" headers="Deceased" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>1,453 (24.0%)</p></td>
<td class="gt_row gt_right" headers="Survival" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"><p>9,491 (25.2%)</p></td>
<td class="gt_row gt_left" headers="p_value" style="text-align: center; background-color: #F2F2F2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gray90;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>It is not clear where the p = 0.045 for DKR variable comes from.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dkr_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1563</span>, <span class="fl">1540</span>, <span class="fl">1498</span>, <span class="fl">1453</span>, <span class="fl">9374</span>, <span class="fl">9414</span>, <span class="fl">9443</span>, <span class="fl">9491</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">dkr_table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Deceased"</span>, <span class="st">"Survival"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">dkr_table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span><span class="op">(</span><span class="va">dkr_table</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  dkr_table
X-squared = 1, df = 3, p-value = 0.8</code></pre>
</div>
</div>
<p>This is worrisome and provides stimulus to look at the outcomes. Obviously without the raw data, we are limited to looking at the unadjusted models. The authors report the following for the unadjusted model</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 14%">
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 21%">
</colgroup>
<thead><tr class="header">
<th>Unadjusted model</th>
<th>Q1</th>
<th>Q2</th>
<th>Q3</th>
<th>Q4</th>
</tr></thead>
<tbody><tr class="odd">
<td></td>
<td>1</td>
<td>1.03(0.96, 1.10)</td>
<td>1.05(0.97, 1.12)</td>
<td>1.05(0.98, 1.13)</td>
</tr></tbody>
</table>
<p>Now this can be verified using the baseline data provided Here’s the calculation for each quartile:</p>
<p>Q1: Risk = 1563 / (1563 + 9374)</p>
<p>Q2: Risk = 1540 / (1540 + 9414)</p>
<p>Q3: Risk = 1498 / (1498 + 9443)</p>
<p>Q4: Risk = 1453 / (1453 + 9491)</p>
<p><span class="math display">\[Risk\,ratio_{Q2,Q1} = \frac{Q2\,risk}{Q1\,risk} = \frac{1540 / (1540 + 9414)}{1563/(1563 + 9374) } = 0.984\]</span> Results for the other RR and 95%CI are easily calculated</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://mvs.unimelb.edu.au/research/groups/veterinary-epidemiology-melbourne">epiR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define the counts of deceased and survival for each quartile</span></span>
<span><span class="va">deceased</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1563</span>, <span class="fl">1540</span>, <span class="fl">1498</span>, <span class="fl">1453</span><span class="op">)</span></span>
<span><span class="va">survival</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9374</span>, <span class="fl">9414</span>, <span class="fl">9443</span>, <span class="fl">9491</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculating the risk ratio and 95% CI using Q1 as the exposed control</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Create the 2x2 table for each comparison with correct exposure designation</span></span>
<span>  <span class="co"># Exposed (Q1) first, then Unexposed (Q2, Q3, Q4)</span></span>
<span>  <span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">deceased</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">survival</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">deceased</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">survival</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Deceased"</span>, <span class="st">"Survival"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"Q%d (Unexposed)"</span>, <span class="va">i</span><span class="op">)</span>, <span class="st">"Q1 (Exposed)"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Calculate the risk ratios using epi.2by2</span></span>
<span>  <span class="fu">epiR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/epiR/man/epi.2by2.html">epi.2by2</a></span><span class="op">(</span><span class="va">table</span>, method <span class="op">=</span> <span class="st">"cohort.count"</span>, conf.level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">results</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[[1]]
             Outcome +    Outcome -      Total                 Inc risk *
Exposed +         1540         9414      10954     14.06 (13.41 to 14.72)
Exposed -         1563         9374      10937     14.29 (13.64 to 14.96)
Total             3103        18788      21891     14.17 (13.72 to 14.64)

Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio                                 0.98 (0.92, 1.05)
Inc odds ratio                                 0.98 (0.91, 1.06)
Attrib risk in the exposed *                   -0.23 (-1.16, 0.69)
Attrib fraction in the exposed (%)            -1.65 (-8.50, 4.76)
Attrib risk in the population *                -0.12 (-0.92, 0.69)
Attrib fraction in the population (%)         -0.82 (-4.13, 2.39)
-------------------------------------------------------------------
Uncorrected chi2 test that OR = 1: chi2(1) = 0.242 Pr&gt;chi2 = 0.622
Fisher exact test that OR = 1: Pr&gt;chi2 = 0.628
 Wald confidence limits
 CI: confidence interval
 * Outcomes per 100 population units 

[[2]]
             Outcome +    Outcome -      Total                 Inc risk *
Exposed +         1498         9443      10941     13.69 (13.05 to 14.35)
Exposed -         1563         9374      10937     14.29 (13.64 to 14.96)
Total             3061        18817      21878     13.99 (13.53 to 14.46)

Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio                                 0.96 (0.90, 1.02)
Inc odds ratio                                 0.95 (0.88, 1.03)
Attrib risk in the exposed *                   -0.60 (-1.52, 0.32)
Attrib fraction in the exposed (%)            -4.38 (-11.47, 2.26)
Attrib risk in the population *                -0.30 (-1.10, 0.50)
Attrib fraction in the population (%)         -2.14 (-5.48, 1.09)
-------------------------------------------------------------------
Uncorrected chi2 test that OR = 1: chi2(1) = 1.633 Pr&gt;chi2 = 0.201
Fisher exact test that OR = 1: Pr&gt;chi2 = 0.205
 Wald confidence limits
 CI: confidence interval
 * Outcomes per 100 population units 

[[3]]
             Outcome +    Outcome -      Total                 Inc risk *
Exposed +         1453         9491      10944     13.28 (12.65 to 13.93)
Exposed -         1563         9374      10937     14.29 (13.64 to 14.96)
Total             3016        18865      21881     13.78 (13.33 to 14.25)

Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio                                 0.93 (0.87, 0.99)
Inc odds ratio                                 0.92 (0.85, 0.99)
Attrib risk in the exposed *                   -1.01 (-1.93, -0.10)
Attrib fraction in the exposed (%)            -7.64 (-15.02, -0.73)
Attrib risk in the population *                -0.51 (-1.31, 0.29)
Attrib fraction in the population (%)         -3.68 (-7.05, -0.42)
-------------------------------------------------------------------
Uncorrected chi2 test that OR = 1: chi2(1) = 4.735 Pr&gt;chi2 = 0.030
Fisher exact test that OR = 1: Pr&gt;chi2 = 0.031
 Wald confidence limits
 CI: confidence interval
 * Outcomes per 100 population units </code></pre>
</div>
</div>
<p>So if the unadjusted results are totally different from what has been reported, how could anyone have the slightest confidence in a magically derived adjusted model, especially when considered in the context of the reservations noted above?</p>
<p>Should the authors maintain their confidence in their findings they should share the dataset and the statistical code that generated these findings.</p>
<p>The problems herein are aggravated by the imprimatur provided by publication in a Nature journal and of using a highly recognizable dataset which has historically been analyzed with much rigour and care.</p>
<p>According to Altmetric, this article is in the 98th percentile (ranked 3,956th) of the 209,240 tracked articles of a similar age in all journals!</p>
<div style="color: red">
<p>Now that I have vented, it is time to get back to other activities.</p>
</div>



</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-RN4395" class="csl-entry" role="listitem">
Altman, D. G., and J. M. Bland. 1995. <span>“Absence of Evidence Is Not Evidence of Absence.”</span> Journal Article. <em>BMJ</em> 311 (7003): 485. <a href="https://doi.org/10.1136/bmj.311.7003.485">https://doi.org/10.1136/bmj.311.7003.485</a>.
</div>
<div id="ref-RN4841" class="csl-entry" role="listitem">
Gelman, A., and HS. Stern. 2006. <span>“The Difference Between <span>‘Significant’</span> and <span>‘Not Significant’</span> Is Not Itself Statistically Significant.”</span> Journal Article. <em>Am Statist</em> 60: 328–31.
</div>
<div id="ref-RN12246" class="csl-entry" role="listitem">
Qu, Xiaolong, Lei Huang, and Jiacheng Rong. 2024. <span>“The Ketogenic Diet Has the Potential to Decrease All-Cause Mortality Without a Concomitant Increase in Cardiovascular-Related Mortality.”</span> Journal Article. <em>Scientific Reports</em> 14 (1): 22805. <a href="https://doi.org/10.1038/s41598-024-73384-x">https://doi.org/10.1038/s41598-024-73384-x</a>.
</div>
<div id="ref-RN12245" class="csl-entry" role="listitem">
Withrow, C. D. 1980. <span>“The Ketogenic Diet: Mechanism of Anticonvulsant Action.”</span> Journal Article. <em>Adv Neurol</em> 27: 635–42.
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{brophy2024,
  author = {Brophy, Jay},
  title = {Reflections on Peer Review - Part 2},
  date = {2024-10-31},
  url = {https://brophyj.com/posts/2024-10-31-my-blog-post/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-brophy2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Brophy, Jay. 2024. <span>“Reflections on Peer Review - Part 2.”</span>
October 31, 2024. <a href="https://brophyj.com/posts/2024-10-31-my-blog-post/">https://brophyj.com/posts/2024-10-31-my-blog-post/</a>.
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/brophyj\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Powered by <a href="https://quarto.org">Quarto</a>.</p>
</div>   
    <div class="nav-footer-center">
<p>© 2024 Jay Brophy</p>
<div class="toc-actions"><ul><li><a href="https://github.com/brophyj/edit/main/posts/2024-10-31-How_bad_before_retraction/index.Rmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/brophyj/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>License: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY NC SA 4.0</a>.</p>
</div>
  </div>
</footer><script type="text/javascript">
const dateElements = document.querySelectorAll("p.date, div.listing-date, div.listing-file-modified");
dateElements.forEach((el) => {
  el.innerHTML = el.innerHTML.replace(
    /(\d+)(st|nd|rd|th)/g,
    "$1<sup style='font-size:0.5em;font-style:italic;'>$2</sup>"
  );
});
</script>


</body></html>